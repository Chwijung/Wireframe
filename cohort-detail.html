<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>과정 상세 관리 - AI-X 시스템</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100">
  <!-- 네비게이션 헤더 -->
  <header class="bg-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-4">
          <button onclick="handleBackToDashboard()" class="text-gray-600 hover:text-gray-800 transition-colors">
            메인으로
          </button>
          <h1 class="text-2xl font-bold text-gray-800" id="cohortTitle">AI-X 3기 운영 관리</h1>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-gray-600">[운영자] 권회은</span>
        </div>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto p-6 space-y-8">

    <!-- 기수 상태 정보 -->
    <section class="bg-white rounded-xl shadow-lg p-6">
      <div class="flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4">
        <div class="flex-1">
          <h2 class="text-xl md:text-2xl lg:text-3xl font-bold text-gray-800" id="cohortName">
            AI-X 3기
          </h2>
          <div class="flex flex-wrap items-center gap-2 md:gap-4 mt-2">
            <span class="bg-indigo-500 text-white px-3 py-1 rounded-full text-sm" id="cohortStatus">진행중</span>
            <span class="text-gray-600" id="cohortPeriod">2025-06-18 ~ 2025-08-30</span>
            <span class="text-gray-600" id="cohortStudents">24/30명</span>
          </div>
          <div class="mt-4">
            <div class="flex items-center gap-2 w-full sm:w-auto">
              <span class="text-sm text-gray-600">진행률:</span>
              <div class="flex-1 bg-gray-200 rounded-full h-2 min-w-0 max-w-full sm:max-w-xs">
                <div class="bg-purple-600 h-2 rounded-full" id="progressBar" style="width: 65%"></div>
              </div>
              <span class="text-sm font-medium text-gray-700" id="progressPercent">65%</span>
            </div>
            <p class="text-sm text-gray-500 mt-1" id="currentPhase">7주차 - 중간 발표 준비</p>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row gap-2 w-full lg:w-auto">
          <button onclick="handleEditCohortInfo()" class="bg-purple-400 text-white px-4 py-2 rounded-lg hover:bg-purple-500 transition-colors w-full sm:w-auto">
            정보 수정
          </button>
          <button onclick="handleGenerateReport()" class="bg-purple-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-purple-200 transition-colors w-full sm:w-auto">
            보고서 생성
          </button>
        </div>
      </div>
    </section>

    <!-- 주요 일정 및 관리 메뉴 -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8">
      <!-- 다음 일정 -->
      <section class="bg-white rounded-xl shadow-lg p-4 md:p-6">
        <h2 class="text-lg md:text-xl font-bold mb-4 flex items-center">
          다음 일정
        </h2>
        <div class="space-y-3" id="upcomingSchedule">
          <!-- 동적으로 생성될 일정 -->
        </div>
      </section>

      <!-- 빠른 관리 메뉴 -->
      <section class="bg-white rounded-xl shadow-lg p-4 md:p-6">
        <h2 class="text-lg md:text-xl font-bold mb-4 flex items-center">
          빠른 관리
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <button onclick="handleNavigate('수강생 관리')" class="bg-purple-100 hover:bg-purple-200 text-gray-700 p-3 rounded-lg transition-colors">
            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
            </svg>
            <div class="text-sm">수강생 관리</div>
          </button>
          <button onclick="handleNavigate('조 관리')" class="bg-purple-400 hover:bg-purple-500 text-white p-3 rounded-lg transition-colors">
            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
            </svg>
            <div class="text-sm">조 관리</div>
          </button>
          <button onclick="handleNavigate('멘토링')" class="bg-indigo-300 hover:bg-indigo-400 text-white p-3 rounded-lg transition-colors">
            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
            </svg>
            <div class="text-sm">멘토링</div>
          </button>
          <button onclick="handleNavigate('프로젝트')" class="bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-lg transition-colors">
            <svg class="w-5 h-5 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
            <div class="text-sm">프로젝트</div>
          </button>
        </div>
      </section>
    </div>

    <!-- 전체 일정 -->
    <section class="bg-white rounded-xl shadow-lg p-4 md:p-6">
      <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
        <h2 class="text-lg md:text-xl lg:text-2xl font-bold flex items-center" id="scheduleTitle">
          AI-X 3기 전체 일정
        </h2>
        <div class="flex flex-col sm:flex-row gap-2">
          <button onclick="handleModifySchedule()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors w-full sm:w-auto">
            일정 수정
          </button>
          <button onclick="handleExportSchedule()" class="bg-purple-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-purple-200 transition-colors w-full sm:w-auto">
            일정 내보내기
          </button>
        </div>
      </div>

      <div class="space-y-4" id="scheduleWeeks">
        <!-- 동적으로 생성될 주별 일정 -->
      </div>
    </section>

        </div>

  <script>
    // 목업 데이터 (React 구조 매칭)
    const cohortData = {
      id: 'ai-x-3rd',
      name: 'AI-X 3기',
      status: 'running',
      start_date: '2025-06-18',
      end_date: '2025-08-30',
      current_students: 24,
      max_students: 30,
      progress_percentage: 65,
      current_phase: '7주차 - 중간 발표 준비',
      mentoring_day: '목요일 14:00',
      next_schedules: [
        {
          title: '중간 발표',
          date: '07.25 (금)',
          description: '프로젝트 중간 발표',
          is_today: false,
          days_remaining: 3
        },
        {
          title: '현직자 특강',
          date: '07.27 (일)',
          description: '산업계 전문가 특강',
          is_today: false,
          days_remaining: 5
        },
        {
          title: '최종 발표',
          date: '08.12 (월)',
          description: '최종 프로젝트 발표',
          is_today: false,
          days_remaining: 21
        }
      ],
      weekly_schedule: [
        {
          week_number: 1,
          week_start: '2025-06-16',
          week_end: '2025-06-22',
          week_period: '06/16 - 06/22',
          events: [
            { name: '오리엔테이션', date: '2025-06-18', korean_day: '수' },
            { name: '딥러닝 특강 1차', date: '2025-06-19', korean_day: '목' },
            { name: '딥러닝 특강 2차', date: '2025-06-20', korean_day: '금' },
            { name: '과정 안내', date: '2025-06-21', korean_day: '토' }
          ],
          event_count: 4,
          is_current: false
        },
        {
          week_number: 2,
          week_start: '2025-06-23',
          week_end: '2025-06-29',
          week_period: '06/23 - 06/29',
          events: [
            { name: '취업 특강', date: '2025-06-27', korean_day: '금' },
            { name: '미니플젝 발표', date: '2025-06-28', korean_day: '토' }
          ],
          event_count: 2,
          is_current: false
        },
        {
          week_number: 7,
          week_start: '2025-07-21',
          week_end: '2025-07-27',
          week_period: '07/21 - 07/27',
          events: [
            { name: '중간 발표', date: '2025-07-25', korean_day: '금' },
            { name: '현직자 특강', date: '2025-07-27', korean_day: '일' }
          ],
          event_count: 2,
          is_current: true
        },
        {
          week_number: 11,
          week_start: '2025-08-11',
          week_end: '2025-08-17',
          week_period: '08/11 - 08/17',
          events: [
            { name: '최종 발표', date: '2025-08-12', korean_day: '월' }
          ],
          event_count: 1,
          is_current: false
        }
      ]
    };

    // 현재 정보 포맷팅
    const currentInfo = {
      name: cohortData.name,
      status: cohortData.status === 'completed' ? '완료' : '진행중',
      statusColor: cohortData.status === 'completed' ? 'bg-slate-500' : 'bg-indigo-500',
      period: `${cohortData.start_date} ~ ${cohortData.end_date}`,
      students: `${cohortData.current_students}/${cohortData.max_students}명`,
      progress: cohortData.progress_percentage,
      currentPhase: cohortData.current_phase
    };

    // 다음 일정 데이터
    const getUpcomingSchedule = () => {
      const eventColors = [
        { bgColor: 'bg-slate-50', borderColor: 'border-slate-200', textColor: 'text-slate-700', dateColor: 'text-slate-600' },
        { bgColor: 'bg-indigo-50', borderColor: 'border-indigo-200', textColor: 'text-gray-700', dateColor: 'text-gray-600' }
      ];

      return cohortData.next_schedules.map((schedule, index) => {
        const colors = eventColors[index] || eventColors[0];
        return {
          title: `• ${schedule.title}`,
          date: schedule.date,
          description: schedule.description,
          ...colors
        };
      });
    };

    // 주별 일정 데이터
    const getScheduleWeeks = () => {
      const colors = [
        { bgColor: 'bg-white', borderColor: 'border-purple-200', textColor: 'text-gray-700' },
        { bgColor: 'bg-purple-50', borderColor: 'border-purple-200', textColor: 'text-gray-700' },
        { bgColor: 'bg-purple-100', borderColor: 'border-purple-300', textColor: 'text-gray-800' },
        { bgColor: 'bg-purple-100', borderColor: 'border-purple-300', textColor: 'text-gray-800' }
      ];

      return cohortData.weekly_schedule.map((week, index) => {
        const colorIndex = index % colors.length;
        const weekColor = colors[colorIndex];

        const formattedEvents = week.events.map(event => {
          const eventDate = new Date(event.date);
          const formattedDate = `${String(eventDate.getMonth() + 1).padStart(2, '0')}.${String(eventDate.getDate()).padStart(2, '0')} (${event.korean_day})`;

          return {
            title: `• ${event.name}`,
            date: formattedDate,
            isUpcoming: new Date(event.date) > new Date()
          };
        });

        return {
          title: `${week.week_number}주차 (${week.week_period})${week.is_current ? ' (현재 진행중)' : ''}`,
          ...weekColor,
          events: formattedEvents,
          isCurrent: week.is_current,
          borderColor: week.is_current ? 'border-purple-400' : weekColor.borderColor
        };
      });
    };

    // UI 업데이트 함수들
    function updateCohortInfo() {
      document.getElementById('cohortTitle').textContent = `${currentInfo.name} 운영 관리`;
      document.getElementById('cohortName').textContent = currentInfo.name;
      document.getElementById('cohortStatus').textContent = currentInfo.status;
      document.getElementById('cohortStatus').className = `${currentInfo.statusColor} text-white px-3 py-1 rounded-full text-sm`;

      document.getElementById('cohortPeriod').textContent = currentInfo.period;
      document.getElementById('cohortStudents').textContent = currentInfo.students;
      document.getElementById('progressBar').style.width = `${currentInfo.progress}%`;
      document.getElementById('progressPercent').textContent = `${currentInfo.progress}%`;
      document.getElementById('currentPhase').textContent = currentInfo.currentPhase;

      document.getElementById('scheduleTitle').textContent = `${currentInfo.name} 전체 일정`;
      document.title = `${currentInfo.name} 상세 관리 - AI-X 시스템`;
    }

    function updateUpcomingSchedule() {
      const schedule = getUpcomingSchedule();
      const container = document.getElementById('upcomingSchedule');

      container.innerHTML = schedule.map(item => `
        <div class="${item.bgColor} border ${item.borderColor} p-3 rounded-lg">
          <div class="flex justify-between items-center">
            <span class="font-medium ${item.textColor}">${item.title}</span>
            <span class="text-sm ${item.dateColor}">${item.date}</span>
          </div>
          <p class="text-sm ${item.dateColor} mt-1">${item.description}</p>
        </div>
      `).join('');
    }

    function updateScheduleWeeks() {
      const weeks = getScheduleWeeks();
      const container = document.getElementById('scheduleWeeks');

      container.innerHTML = weeks.map(week => `
        <div class="border ${week.isCurrent ? 'border-2 ' + week.borderColor : week.borderColor} rounded-lg p-4 ${week.bgColor}">
          <h3 class="font-bold ${week.textColor} mb-2">${week.title}</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            ${week.events.map(event => `
              <div class="space-y-2">
                <div class="flex items-center justify-between p-2 bg-white rounded border ${event.isUpcoming ? 'border-purple-300' : ''}">
                  <span class="text-sm">${event.title}</span>
                  <span class="text-xs ${event.isUpcoming ? 'text-gray-600 font-medium' : 'text-gray-500'}">
                    ${event.date}
                  </span>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `).join('');
    }

    // 이벤트 핸들러
    function handleBackToDashboard() {
      window.location.href = 'index.html';
    }

    function handleNavigate(page) {
      alert(`${page} 페이지로 이동합니다. (구현 예정)`);
    }

    function handleEditCohortInfo() {
      alert('기수 정보 수정 모달을 엽니다.\\n\\n수정 가능 항목:\\n• 기수 이름\\n• 교육 기간\\n• 멘토링 일정\\n• 상태');
    }

    function handleGenerateReport() {
      alert('기수 보고서를 생성합니다...\\n\\n포함 내용:\\n• 수강생 현황 및 출석률\\n• 과제 제출 통계\\n• 멘토링 기록 요약\\n• 프로젝트 진행 상황\\n• 예산 사용 내역');
    }

    function handleModifySchedule() {
      alert('일정 수정 모달을 엽니다.\\n\\n수정 가능 항목:\\n• 일정 날짜 변경\\n• 새 일정 추가\\n• 일정 삭제\\n• 일정 설명 수정');
    }

    function handleExportSchedule() {
      if (confirm('일정을 어떤 형식으로 내보내시겠습니까?\\n\\nOK: Excel 파일\\nCancel: PDF 파일')) {
        alert('Excel 형식으로 일정을 내보냅니다.');
      } else {
        alert('PDF 형식으로 일정을 내보냅니다.');
      }
    }

    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', function() {
      updateCohortInfo();
      updateUpcomingSchedule();
      updateScheduleWeeks();
    });
  </script>
</body>
</html>