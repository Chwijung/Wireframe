<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì‚¬ì „ ì„¤ë¬¸ - AI-X í•™ìƒ ì‹œìŠ¤í…œ</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-purple-50 to-blue-100">
  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="bg-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-4">
          <a href="index.html" class="text-purple-600 hover:text-purple-800">â† ë©”ì¸ìœ¼ë¡œ</a>
          <h1 class="text-2xl font-bold text-purple-700">ğŸ“ ì‚¬ì „ ì„¤ë¬¸</h1>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-gray-600">ê¹€ìˆ˜ê°•</span>
          <span class="text-gray-600">1ì¡° - AI í˜ì‹ íŒ€</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <div class="max-w-4xl mx-auto p-6">
    <!-- í—¤ë” -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
      <h2 class="text-3xl font-bold text-gray-800 mb-2">í•„ìˆ˜ ì„¤ë¬¸ ì‘ë‹µ</h2>
      <p class="text-gray-600">ê³¼ì • ê°œì„ ì„ ìœ„í•œ ì„¤ë¬¸ì— ì°¸ì—¬í•´ì£¼ì„¸ìš”</p>
    </div>

    <!-- ì„¤ë¬¸ ëª©ë¡ -->
    <div id="surveysList" class="space-y-6">
      <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
    </div>
  </div>

  <!-- ì„¤ë¬¸ ì‘ë‹µ ëª¨ë‹¬ -->
  <div id="surveyModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-xl max-w-3xl w-full mx-4 max-h-screen overflow-y-auto">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-xl font-semibold" id="surveyTitle">ì„¤ë¬¸ ì‘ë‹µ</h3>
          <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
        </div>
        
        <div id="surveyContent">
          <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // ê°„ë‹¨í•œ ì„¤ë¬¸ ë°ì´í„°
    const SURVEYS_DATA = [
      {
        id: 1,
        title: 'íŒ€ ë¹Œë”© ì‚¬ì „ ì„¤ë¬¸',
        description: 'íŒ€ í¸ì„±ì„ ìœ„í•œ ê¸°ë³¸ ì •ë³´ ìˆ˜ì§‘',
        status: 'completed',
        completedDate: '2024-01-16',
        estimatedTime: '5ë¶„'
      },
      {
        id: 2,
        title: 'ì¤‘ê°„ í‰ê°€ ì„¤ë¬¸',
        description: 'ê³¼ì • ì¤‘ë°˜ë¶€ ë§Œì¡±ë„ ë° ê°œì„ ì‚¬í•­ ì¡°ì‚¬',
        status: 'available',
        dueDate: '2025-01-30',
        estimatedTime: '8ë¶„',
        questions: [
          {
            id: 1,
            type: 'radio',
            question: 'í˜„ì¬ ê³¼ì •ì— ëŒ€í•œ ì „ë°˜ì ì¸ ë§Œì¡±ë„ëŠ”?',
            options: ['ë§¤ìš° ë§Œì¡±', 'ë§Œì¡±', 'ë³´í†µ', 'ë¶ˆë§Œì¡±', 'ë§¤ìš° ë¶ˆë§Œì¡±'],
            required: true
          },
          {
            id: 2,
            type: 'checkbox',
            question: 'ê°€ì¥ ë„ì›€ì´ ë˜ëŠ” ë¶€ë¶„ì€? (ë³µìˆ˜ì„ íƒ)',
            options: ['ì´ë¡  ìˆ˜ì—…', 'í”„ë¡œì íŠ¸ ì‹¤ìŠµ', 'ë©˜í† ë§', 'íŒ€ í™œë™'],
            required: true
          },
          {
            id: 3,
            type: 'text',
            question: 'ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ì´ë‚˜ ê±´ì˜ì‚¬í•­ì´ ìˆë‹¤ë©´ ììœ ë¡­ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.',
            required: false
          }
        ]
      },
      {
        id: 3,
        title: 'ìµœì¢… í‰ê°€ ì„¤ë¬¸',
        description: 'ì „ì²´ ê³¼ì • ì™„ë£Œ í›„ ì¢…í•© í‰ê°€',
        status: 'upcoming',
        openDate: '2025-02-15',
        estimatedTime: '10ë¶„'
      }
    ];

    function getStatusBadge(status) {
      const statusConfig = {
        'completed': { class: 'bg-green-100 text-green-800', text: 'âœ… ì™„ë£Œ' },
        'available': { class: 'bg-purple-100 text-purple-800', text: 'ğŸ“ ì‘ë‹µ ê°€ëŠ¥' },
        'upcoming': { class: 'bg-blue-100 text-blue-800', text: 'â° ì˜ˆì •' }
      };
      
      const config = statusConfig[status];
      return `<span class="px-3 py-1 rounded-full text-sm font-medium ${config.class}">${config.text}</span>`;
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('ko-KR', { 
        month: 'long', 
        day: 'numeric'
      });
    }

    function calculateDday(dueDate) {
      const today = new Date();
      const due = new Date(dueDate);
      const diffTime = due - today;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      
      if (diffDays <= 0) return 'ë§ˆê°';
      if (diffDays === 1) return 'D-1';
      return `D-${diffDays}`;
    }

    function renderSurveys() {
      const container = document.getElementById('surveysList');
      
      container.innerHTML = SURVEYS_DATA.map(survey => `
        <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 ${
          survey.status === 'completed' ? 'border-green-500' : 
          survey.status === 'available' ? 'border-purple-500' : 'border-blue-500'
        }">
          <div class="flex justify-between items-start mb-4">
            <div class="flex-1">
              <div class="flex items-center space-x-3 mb-3">
                <h3 class="text-xl font-bold text-gray-800">${survey.title}</h3>
                ${getStatusBadge(survey.status)}
                ${survey.status === 'available' && survey.dueDate ? 
                  `<span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium">${calculateDday(survey.dueDate)}</span>` : ''}
              </div>
              <p class="text-gray-600 mb-4">${survey.description}</p>
              
              <div class="flex items-center space-x-6 text-sm text-gray-500">
                <span>â±ï¸ ì˜ˆìƒ ì‹œê°„: ${survey.estimatedTime}</span>
                ${survey.completedDate ? `<span>âœ… ì™„ë£Œ: ${formatDate(survey.completedDate)}</span>` : ''}
                ${survey.dueDate ? `<span>ğŸ“… ë§ˆê°: ${formatDate(survey.dueDate)}</span>` : ''}
                ${survey.openDate ? `<span>ğŸ“… ì‹œì‘: ${formatDate(survey.openDate)}</span>` : ''}
              </div>
            </div>
          </div>

          <div class="flex justify-end">
            ${survey.status === 'available' ? `
              <button onclick="startSurvey(${survey.id})" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium">
                ğŸ“ ì„¤ë¬¸ ì‹œì‘
              </button>
            ` : survey.status === 'completed' ? `
              <button class="bg-green-600 text-white px-6 py-3 rounded-lg font-medium cursor-default">
                âœ… ì‘ë‹µ ì™„ë£Œ
              </button>
            ` : `
              <button class="bg-gray-400 text-white px-6 py-3 rounded-lg font-medium cursor-not-allowed" disabled>
                â° ì‘ë‹µ ê¸°ê°„ ì•„ë‹˜
              </button>
            `}
          </div>
        </div>
      `).join('');
    }

    function startSurvey(surveyId) {
      const survey = SURVEYS_DATA.find(s => s.id === surveyId);
      if (!survey || survey.status !== 'available') return;

      document.getElementById('surveyTitle').textContent = survey.title;
      document.getElementById('surveyContent').innerHTML = `
        <div class="space-y-6">
          <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
            <h4 class="font-semibold text-purple-800 mb-2">ğŸ“‹ ì„¤ë¬¸ ì•ˆë‚´</h4>
            <div class="text-sm text-purple-700">
              <p>â€¢ ì˜ˆìƒ ì†Œìš”ì‹œê°„: ${survey.estimatedTime}</p>
              <p>â€¢ ì •ì§í•œ ë‹µë³€ ë¶€íƒë“œë¦½ë‹ˆë‹¤</p>
              <p>â€¢ ì œì¶œ í›„ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤</p>
            </div>
          </div>

          <form id="surveyForm" class="space-y-6">
            ${survey.questions.map((question, index) => `
              <div class="bg-gray-50 rounded-lg p-6">
                <h5 class="font-semibold text-gray-800 mb-4">
                  ${index + 1}. ${question.question}
                  ${question.required ? '<span class="text-red-600 ml-1">*</span>' : ''}
                </h5>
                
                ${question.type === 'radio' ? `
                  <div class="space-y-3">
                    ${question.options.map(option => `
                      <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-3 rounded transition-colors">
                        <input type="radio" name="question_${question.id}" value="${option}" ${question.required ? 'required' : ''} class="text-purple-600 focus:ring-purple-500">
                        <span class="text-gray-700">${option}</span>
                      </label>
                    `).join('')}
                  </div>
                ` : question.type === 'checkbox' ? `
                  <div class="space-y-3">
                    ${question.options.map(option => `
                      <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-3 rounded transition-colors">
                        <input type="checkbox" name="question_${question.id}" value="${option}" class="text-purple-600 focus:ring-purple-500">
                        <span class="text-gray-700">${option}</span>
                      </label>
                    `).join('')}
                  </div>
                ` : `
                  <textarea name="question_${question.id}" rows="4" ${question.required ? 'required' : ''} class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="ììœ ë¡­ê²Œ ì˜ê²¬ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
                `}
              </div>
            `).join('')}

            <div class="flex space-x-4">
              <button type="button" onclick="closeModal()" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 transition-colors font-medium">
                ì·¨ì†Œ
              </button>
              <button type="submit" class="flex-1 bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium">
                ì œì¶œí•˜ê¸°
              </button>
            </div>
          </form>
        </div>
      `;

      document.getElementById('surveyForm').addEventListener('submit', function(e) {
        e.preventDefault();
        submitSurvey(surveyId);
      });

      document.getElementById('surveyModal').classList.remove('hidden');
    }

    function submitSurvey(surveyId) {
      showNotification('ì„¤ë¬¸ ì‘ë‹µì„ ì œì¶œí•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...', 'info');

      setTimeout(() => {
        const survey = SURVEYS_DATA.find(s => s.id === surveyId);
        if (survey) {
          survey.status = 'completed';
          survey.completedDate = new Date().toISOString().split('T')[0];
        }

        closeModal();
        renderSurveys();
        showNotification('ì„¤ë¬¸ ì‘ë‹µì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤.', 'success');
      }, 2000);
    }

    function closeModal() {
      document.getElementById('surveyModal').classList.add('hidden');
    }

    function showNotification(message, type = 'info') {
      const colors = {
        'success': 'bg-green-100 text-green-800',
        'error': 'bg-red-100 text-red-800',
        'info': 'bg-blue-100 text-blue-800'
      };
      
      const notif = document.createElement('div');
      notif.className = `fixed top-4 right-4 ${colors[type]} px-6 py-4 rounded-lg shadow-lg z-50 transition-all duration-300`;
      notif.textContent = message;
      document.body.appendChild(notif);
      setTimeout(() => {
        notif.style.opacity = '0';
        setTimeout(() => notif.remove(), 300);
      }, 3000);
    }

    // ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', function() {
      renderSurveys();
    });
  </script>
</body>
</html>