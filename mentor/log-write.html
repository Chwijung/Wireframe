<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>멘토링 일지 작성 - AI-X 멘토 시스템</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    html, body {
      overflow-x: hidden;
      height: 100%;
      scroll-behavior: smooth;
    }
    .card {
      transition: transform 0.2s ease;
    }
    .card:hover {
      transform: translateY(-2px);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-purple-100">
  <!-- 헤더 -->
  <nav class="bg-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-4">
          <button onclick="goBackToMentor()" class="text-indigo-600 hover:text-indigo-800">
            ← 멘토 대시보드
          </button>
          <h1 class="text-2xl font-bold text-indigo-700">📝 멘토링 일지 작성</h1>
        </div>
        <div class="flex items-center space-x-4">
          <span class="text-gray-600">멘토: 김민준</span>
          <div class="flex items-center space-x-2">
            <span class="text-sm text-green-600 font-medium">작성 가능</span>
            <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="max-w-7xl mx-auto p-6 space-y-6">
    <!-- 페이지 헤더 -->
    <header class="bg-white rounded-xl shadow-lg p-6">
      <div class="flex justify-between items-center">
        <div>
          <h2 class="text-3xl font-bold text-gray-800 mb-2">멘토링 일지 작성</h2>
          <p class="text-gray-600">담당 조의 멘토링 내용을 기록하고 관리하세요</p>
        </div>
        <div class="text-right">
          <div class="text-2xl font-bold text-indigo-600">1조</div>
          <div class="text-sm text-gray-500">AI 챗봇 프로젝트</div>
        </div>
      </div>
    </header>

    <!-- 일지 상태 요약 -->
    <section class="bg-gradient-to-r from-red-500 to-orange-600 rounded-xl shadow-xl p-6 text-white">
      <h3 class="text-xl font-bold mb-4 flex items-center">
        📝 일지 미작성 현황
      </h3>
      <div class="grid md:grid-cols-4 gap-4">
        <div class="bg-white bg-opacity-20 rounded-lg p-4 border-2 border-yellow-300">
          <p class="font-bold text-lg">6월 27일 (화)</p>
          <p class="text-sm opacity-90">⏳ 오늘 작성 필요</p>
        </div>
        <div class="bg-white bg-opacity-20 rounded-lg p-4 border-2 border-red-300">
          <p class="font-bold text-lg">6월 28일 (금)</p>
          <p class="text-sm opacity-90">❌ 미작성</p>
        </div>
        <div class="bg-white bg-opacity-20 rounded-lg p-4 border-2 border-red-300">
          <p class="font-bold text-lg">7월 1일 (화)</p>
          <p class="text-sm opacity-90">❌ 미작성</p>
        </div>
        <div class="bg-white bg-opacity-20 rounded-lg p-4 border-2 border-red-300">
          <p class="font-bold text-lg">7월 2일 (금)</p>
          <p class="text-sm opacity-90">❌ 미작성</p>
        </div>
      </div>
      <div class="mt-4 p-3 bg-white bg-opacity-10 rounded-lg">
        <p class="text-sm">
          <span class="font-semibold">📊 작성 현황:</span>
          <span class="ml-2">작성완료 3일</span>
          <span class="ml-4 text-yellow-200">⏳ 오늘 작성 1일</span>
          <span class="ml-4 text-red-200">❌ 미작성 3일</span>
        </p>
      </div>
    </section>

    <!-- 멘토링 일지 작성 폼 -->
    <form id="mentoringForm" class="space-y-6">
      <div class="bg-white rounded-xl shadow-lg p-6">
        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
          <svg class="w-5 h-5 text-indigo-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
          </svg>
          멘토링 일지
        </h3>
                <!-- 엑셀과 유사한 테이블 구조 -->
                <div class="overflow-x-auto">
                  <table class="w-full border-collapse border border-gray-300">
                    <thead>
                      <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 w-20">차시</th>
                        <th class="border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 w-32">일자</th>
                        <th class="border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 w-48">멘토링 주제</th>
                        <th class="border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700">멘토링 진행 사항</th>
                        <th class="border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 w-24">액션</th>
                      </tr>
                    </thead>
                    <tbody id="mentoringTableBody">
                      <!-- 1차시 -->
                      <tr id="row-1">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">1차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-06-25 (화)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">오리엔테이션 및 팀 구성</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-1" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(1)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(1)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 2차시 -->
                      <tr id="row-2">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">2차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-06-28 (금)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">미니프로젝트 소개</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-2" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(2)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(2)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 3차시 -->
                      <tr id="row-3">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">3차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-02 (화)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">컨셉 및 프로젝트 기획</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-3" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(3)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(3)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 4차시 -->
                      <tr id="row-4">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">4차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-05 (금)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">프로젝트 기능 개발</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-4" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(4)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(4)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 5차시 -->
                      <tr id="row-5">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">5차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-09 (화)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">프로젝트 기능 개발</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-5" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(5)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(5)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 6차시 -->
                      <tr id="row-6">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">6차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-12 (금)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">프로젝트 진행 상황 점검</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-6" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(6)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(6)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 7차시 -->
                      <tr id="row-7">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">7차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-16 (화)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">프로젝트 기능 개발</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-7" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(7)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(7)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 8차시 -->
                      <tr id="row-8">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">8차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-19 (금)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">프로젝트 최종 점검</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-8" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(8)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(8)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 9차시 -->
                      <tr id="row-9">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">9차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-23 (화)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">프로젝트 발표 준비</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-9" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(9)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(9)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                      <!-- 10차시 -->
                      <tr id="row-10">
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <span class="text-sm font-medium">10차시</span>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">2024-07-26 (금)</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <div class="text-sm font-medium text-gray-800">최종 발표 및 평가</div>
                        </td>
                        <td class="border border-gray-300 px-2 py-2">
                          <textarea id="progressContent-10" class="w-full h-20 border-0 bg-transparent text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="진행 사항을 입력하세요..." onchange="updateRow(10)"></textarea>
                        </td>
                        <td class="border border-gray-300 px-2 py-2 text-center">
                          <button onclick="saveRow(10)" class="text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600">저장</button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
      </div>
    </form>
  </div>

  <script>
    // 팀 데이터
    const TEAMS_DATA = {
      team1: {
        name: '1조 - AI 챗봇 프로젝트',
        students: 6,
        mentor: '김민준'
      },
      team2: {
        name: '2조 - 추천 시스템 프로젝트',
        students: 5,
        mentor: '김민준'
      }
    };

    // 주간 작성 현황 시뮬레이션
    const WEEKLY_STATUS = {
      '2024-06-24': { status: 'completed', team: 'team1' },
      '2024-06-25': { status: 'completed', team: 'team1' },
      '2024-06-26': { status: 'completed', team: 'team1' },
      '2024-06-27': { status: 'today', team: 'team1' }
    };
    // 저장된 일지 목업 데이터
    let SAVED_LOGS = [
      {
        id: 1,
        date: '2024-06-26',
        team: 'team1',
        sessionNumber: 3,
        topic: 'concept',
        customTopic: '',
        progressContent: '- 진행 방향 가이드: 프로젝트 기획 방법론 설명, 아이디어 발굴 및 검증 프로세스\n- 자료 목표: 기획서 템플릿, 아이디어 검증 체크리스트 제공\n- 진행 사항 점검: 프로젝트 아이디어 브레인스토밍, 기획서 초안 작성, 팀별 역할 분담 논의',
        attendees: 6,
        duration: 2,
        meetingType: 'offline',
        saved: true,
        submittedAt: '2024-06-26 15:30'
      },
      {
        id: 2,
        date: '2024-06-25',
        team: 'team1',
        sessionNumber: 2,
        topic: 'miniproject',
        customTopic: '',
        progressContent: '- 진행 방향 가이드: 미니프로젝트 소개 및 개요 설명, 프로젝트 목표 및 예상 결과물 제시\n- 자료 목표: 미니프로젝트 가이드 문서, 참고 사례 및 예제 코드\n- 진행 사항 점검: 프로젝트 주제 선정, 개발 환경 설정, 기본 구조 설계',
        attendees: 5,
        duration: 3,
        meetingType: 'hybrid',
        saved: true,
        submittedAt: '2024-06-25 16:45'
      },
      {
        id: 3,
        date: '2024-06-24',
        team: 'team1',
        sessionNumber: 1,
        topic: 'miniproject',
        customTopic: '',
        progressContent: '- 진행 방향 가이드: 미니프로젝트 소개 및 개요 설명, 프로젝트 목표 및 예상 결과물 제시\n- 자료 목표: 미니프로젝트 가이드 문서, 참고 사례 및 예제 코드\n- 진행 사항 점검: 오리엔테이션 진행, 팀 구성 및 소개, 커리큘럼 안내',
        attendees: 6,
        duration: 2,
        meetingType: 'offline',
        saved: true,
        submittedAt: '2024-06-24 14:20'
      }
    ];

    function goBackToMentor() {
      window.location.href = 'index.html';
    }

    // 더 이상 필요하지 않은 함수 (일자와 주제가 고정되어 있음)

    // 행 변경 시 자동저장 표시
    function updateRow(rowNumber) {
      const saveButton = document.querySelector(`#row-${rowNumber} button`);
      saveButton.classList.add('bg-orange-500', 'hover:bg-orange-600');
      saveButton.classList.remove('bg-blue-500', 'hover:bg-blue-600');
      saveButton.textContent = '변경됨';
    }

    // 개별 행 저장
    function saveRow(rowNumber) {
      const progressContent = document.getElementById(`progressContent-${rowNumber}`).value;
      
      // 미리 정의된 일자와 주제 정보
      const sessionData = {
        1: { date: '2024-06-25', topic: '오리엔테이션 및 팀 구성' },
        2: { date: '2024-06-28', topic: '미니프로젝트 소개' },
        3: { date: '2024-07-02', topic: '컨셉 및 프로젝트 기획' },
        4: { date: '2024-07-05', topic: '프로젝트 기능 개발' },
        5: { date: '2024-07-09', topic: '프로젝트 기능 개발' },
        6: { date: '2024-07-12', topic: '프로젝트 진행 상황 점검' },
        7: { date: '2024-07-16', topic: '프로젝트 기능 개발' },
        8: { date: '2024-07-19', topic: '프로젝트 최종 점검' },
        9: { date: '2024-07-23', topic: '프로젝트 발표 준비' },
        10: { date: '2024-07-26', topic: '최종 발표 및 평가' }
      };

      // 데이터 검증 (진행사항만 확인)
      if (progressContent.trim() !== '') {
        // 저장 처리 (실제로는 서버로 전송)
        const formData = {
          sessionNumber: rowNumber,
          date: sessionData[rowNumber].date,
          topic: sessionData[rowNumber].topic,
          customTopic: '',
          progressContent: progressContent,
          team: 'team1'
        };

        // 기존 로그 업데이트 또는 새로 추가
        const existingLogIndex = SAVED_LOGS.findIndex(log => 
          log.sessionNumber === rowNumber && log.team === 'team1'
        );

        if (existingLogIndex >= 0) {
          SAVED_LOGS[existingLogIndex] = { 
            ...SAVED_LOGS[existingLogIndex], 
            ...formData, 
            submittedAt: new Date().toLocaleString('ko-KR')
          };
        } else {
          const newId = Math.max(...SAVED_LOGS.map(log => log.id), 0) + 1;
          SAVED_LOGS.unshift({ 
            ...formData, 
            id: newId,
            attendees: 6,
            duration: 2,
            meetingType: 'offline',
            saved: true,
            submittedAt: new Date().toLocaleString('ko-KR')
          });
        }

        // 저장 버튼 상태 업데이트
        const saveButton = document.querySelector(`#row-${rowNumber} button`);
        saveButton.classList.remove('bg-orange-500', 'hover:bg-orange-600');
        saveButton.classList.add('bg-green-500', 'hover:bg-green-600');
        saveButton.textContent = '저장됨';

        // 하단 저장된 일지 목록 업데이트
        renderSavedLogs();

        // 3초 후 원래 상태로 복원
        setTimeout(() => {
          saveButton.classList.remove('bg-green-500', 'hover:bg-green-600');
          saveButton.classList.add('bg-blue-500', 'hover:bg-blue-600');
          saveButton.textContent = '저장';
        }, 3000);

        alert(`${rowNumber}차시 멘토링 일지가 저장되었습니다.`);
      } else {
        alert('진행사항을 입력해주세요.');
      }
    }

    function renderSavedLogs() {
      const container = document.getElementById('savedLogs');
      const teamLogs = SAVED_LOGS.filter(log => log.team === 'team1'); // 현재 팀(1조)에 해당하는 로그만 표시
      
      if (teamLogs.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">작성된 일지가 없습니다.</p>';
        return;
      }
      
      container.innerHTML = teamLogs.map(log => `
        <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200">
          <div class="flex-1">
            <div class="flex items-center space-x-3 mb-2">
              <span class="bg-indigo-100 text-indigo-800 text-xs font-medium px-2 py-0.5 rounded">${log.sessionNumber}차시</span>
              <div class="font-medium text-gray-800">${log.date}</div>
              <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-0.5 rounded">제출완료</span>
              <span class="text-xs text-gray-500">${log.submittedAt}</span>
            </div>
            <div class="text-sm text-gray-600 mb-1">
              <span class="font-medium">${getTopicDisplayName(log.topic, log.customTopic)}</span>
              ${log.progressContent ? ` - ${log.progressContent.substring(0, 60)}...` : ''}
            </div>
            <div class="flex items-center space-x-4 text-xs text-gray-500">
              <span>👥 ${log.attendees}명 참석</span>
              <span>⏰ ${log.duration}시간</span>
              <span>📍 ${log.meetingType === 'offline' ? '오프라인' : log.meetingType === 'online' ? '온라인' : '하이브리드'}</span>
            </div>
          </div>
          <div class="flex gap-2">
            <button onclick="viewLog(${log.id})" class="text-indigo-600 hover:text-indigo-800 text-sm px-3 py-1 bg-indigo-50 rounded">상세보기</button>
            <button onclick="loadLog(${log.id})" class="text-blue-600 hover:text-blue-800 text-sm px-3 py-1 bg-blue-50 rounded">수정</button>
          </div>
        </div>
      `).join('');
    }

    // 주제 표시명 반환
    function getTopicDisplayName(topic, customTopic) {
      if (topic === 'custom') return customTopic || '직접 입력';
      
      const topicNames = {
        'miniproject': '미니프로젝트',
        'concept': '컨셉 및 프로젝트 기획', 
        'development': '프로젝트 기능 개발',
        'presentation': '프로젝트 진행',
        'review': '프로젝트 점검'
      };
      
      return topicNames[topic] || topic;
    }

    function viewLog(logId) {
      const log = SAVED_LOGS.find(l => l.id === logId);
      if (log) {
        const modalContent = `
          <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" onclick="closeModal()">
            <div class="bg-white rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto" onclick="event.stopPropagation()">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">멘토링 일지 상세보기</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">✕</button>
              </div>
              
              <div class="space-y-4">
                <div class="grid grid-cols-4 gap-4">
                  <div>
                    <label class="text-sm font-medium text-gray-700">차시</label>
                    <div class="text-gray-900">${log.sessionNumber}차시</div>
                  </div>
                  <div>
                    <label class="text-sm font-medium text-gray-700">날짜</label>
                    <div class="text-gray-900">${log.date}</div>
                  </div>
                  <div>
                    <label class="text-sm font-medium text-gray-700">팀</label>
                    <div class="text-gray-900">${TEAMS_DATA[log.team].name}</div>
                  </div>
                  <div>
                    <label class="text-sm font-medium text-gray-700">주제</label>
                    <div class="text-gray-900">${getTopicDisplayName(log.topic, log.customTopic)}</div>
                  </div>
                </div>
                
                <div class="grid grid-cols-3 gap-4">
                  <div>
                    <label class="text-sm font-medium text-gray-700">참석인원</label>
                    <div class="text-gray-900">${log.attendees}명</div>
                  </div>
                  <div>
                    <label class="text-sm font-medium text-gray-700">진행시간</label>
                    <div class="text-gray-900">${log.duration}시간</div>
                  </div>
                  <div>
                    <label class="text-sm font-medium text-gray-700">진행방식</label>
                    <div class="text-gray-900">${log.meetingType === 'offline' ? '오프라인' : log.meetingType === 'online' ? '온라인' : '하이브리드'}</div>
                  </div>
                </div>
                
                <div>
                  <label class="text-sm font-medium text-gray-700">멘토링 진행 사항</label>
                  <div class="mt-1 p-3 bg-gray-50 rounded-lg text-gray-900 whitespace-pre-line">${log.progressContent || '-'}</div>
                </div>
                
                <div class="text-sm text-gray-500 text-right">
                  제출일시: ${log.submittedAt}
                </div>
              </div>
            </div>
          </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalContent);
      }
    }

    function closeModal() {
      const modal = document.querySelector('.fixed.inset-0');
      if (modal) {
        modal.remove();
      }
    }

    function loadLog(logId) {
      const log = SAVED_LOGS.find(l => l.id === logId);
      if (log) {
        const rowNumber = log.sessionNumber;
        
        // 멘토링 내용만 로드 (일자와 주제는 이미 고정되어 있음)
        document.getElementById(`progressContent-${rowNumber}`).value = log.progressContent || '';
        
        // 해당 행으로 스크롤
        document.getElementById(`row-${rowNumber}`).scrollIntoView({ 
          behavior: 'smooth', 
          block: 'center' 
        });
        
        // 버튼 상태 변경으로 수정 중임을 표시
        updateRow(rowNumber);
        
        alert(`${rowNumber}차시 일지를 불러왔습니다. 수정 후 저장하세요.`);
      }
    }

    function deleteLog(logId) {
      if (confirm('정말 삭제하시겠습니까?')) {
        SAVED_LOGS = SAVED_LOGS.filter(log => log.id !== logId);
        renderSavedLogs();
        alert('일지가 삭제되었습니다.');
      }
    }

    // 전체 저장 (모든 입력된 행을 일괄 저장)
    function saveAllRows() {
      let savedCount = 0;
      
      for (let i = 1; i <= 10; i++) {
        const progressContent = document.getElementById(`progressContent-${i}`).value;

        if (progressContent.trim() !== '') {
          saveRow(i);
          savedCount++;
        }
      }
      
      if (savedCount > 0) {
        alert(`총 ${savedCount}개의 멘토링 일지가 저장되었습니다.`);
      } else {
        alert('저장할 데이터가 없습니다. 진행사항을 입력해주세요.');
      }
    }

    // 폼 제출 이벤트 (전체 저장)
    document.getElementById('mentoringForm').addEventListener('submit', function(e) {
      e.preventDefault();
      saveAllRows();
    });

    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', function() {
      // 저장된 일지 목록 렌더링
      renderSavedLogs();
      
      // 기존 저장된 데이터가 있는 경우 테이블에 로드
      loadExistingDataToTable();
    });

    // 기존 저장된 데이터를 테이블에 로드
    function loadExistingDataToTable() {
      SAVED_LOGS.forEach(log => {
        if (log.team === 'team1') {
          const rowNumber = log.sessionNumber;
          
          // 진행사항만 로드 (일자와 주제는 이미 고정되어 있음)
          document.getElementById(`progressContent-${rowNumber}`).value = log.progressContent || '';
          
          // 저장된 상태로 버튼 표시
          const saveButton = document.querySelector(`#row-${rowNumber} button`);
          saveButton.classList.remove('bg-blue-500', 'hover:bg-blue-600');
          saveButton.classList.add('bg-green-500', 'hover:bg-green-600');
          saveButton.textContent = '저장됨';
        }
      });
    }
  </script>
</body>
</html>